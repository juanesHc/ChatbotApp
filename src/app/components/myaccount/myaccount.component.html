<div class="profile-page">

  <!-- Loading -->
  <div class="loading-wrapper" *ngIf="isLoading">
    <div class="spinner"></div>
    <p class="loading-text">Cargando perfil...</p>
  </div>

  <!-- Error carga inicial -->
  <div class="error-card" *ngIf="errorMessage && !isLoading && !personData">
    <span class="error-icon">âš </span>
    <p>{{ errorMessage }}</p>
    <button class="btn-retry" (click)="loadPersonData()">Reintentar</button>
  </div>

  <!-- Profile Card -->
  <div class="profile-card" *ngIf="personData && !isLoading">

    <div class="card-header">
      <div class="avatar">{{ initials }}</div>
      <div class="header-info">
        <h1 class="full-name">{{ fullName }}</h1>
        <span class="badge">Mi Perfil</span>
      </div>
    </div>

    <div class="divider"></div>

    <!-- Banner error operaciones -->
    <div class="error-banner" *ngIf="operationError">
      âš  {{ operationError }}
    </div>

    <div class="card-body">
      <div class="field-group">
        <label class="field-label">Nombre</label>
        <div class="field-value">{{ personData.firstName }}</div>
      </div>
      <div class="field-group">
        <label class="field-label">Apellido</label>
        <div class="field-value">{{ personData.lastName }}</div>
      </div>
      <div class="field-group">
        <label class="field-label">Correo electrÃ³nico</label>
        <div class="field-value email-value">{{ personData.email }}</div>
      </div>
    </div>

    <div class="card-footer">
      <span class="last-update">Ãšltima actualizaciÃ³n: {{ formattedLastUpdate }}</span>
      <div class="footer-actions">
        <button class="btn-edit" (click)="goToEdit()">
          <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24"
               fill="none" stroke="currentColor" stroke-width="2.5"
               stroke-linecap="round" stroke-linejoin="round">
            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
          </svg>
          Editar perfil
        </button>
        <button class="btn-delete" (click)="confirmDelete()">Eliminar cuenta</button>
      </div>
    </div>

  </div>

  <button class="btn-back" (click)="goHome()">Home</button>

  <!-- Modal Confirmar EliminaciÃ³n -->
  <div class="modal-overlay" *ngIf="showDeleteModal" (click)="closeModal()">
    <div class="modal-card" (click)="$event.stopPropagation()">
      <div class="modal-icon">ðŸ—‘</div>
      <h2 class="modal-title">Eliminar cuenta</h2>
      <p class="modal-text">
        Esta acciÃ³n es <strong>permanente</strong> y no se puede deshacer.
        Â¿EstÃ¡s seguro de que deseas eliminar tu cuenta?
      </p>
      <div class="modal-actions">
        <button class="btn-modal-cancel" (click)="closeModal()">Cancelar</button>
        <button class="btn-modal-confirm" (click)="deleteAccount()">SÃ­, eliminar</button>
      </div>
    </div>
  </div>

</div>